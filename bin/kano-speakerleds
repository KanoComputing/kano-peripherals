#!/usr/bin/env python

# kano-speakerleds
#
# Copyright (C) 2015 Kano Computing Ltd.
# License: http://www.gnu.org/licenses/gpl-2.0.txt GNU General Public License v2
#
# Command for interacting with speaker LEDs
#
# UNSTABLE for 2.1.1

from kano_peripherals import speaker_leds

from docopt import docopt


def parse_args(args):
    if args['detect']:
        rc = speaker_leds.detect()
        exit(rc)
    if args['notification']:
        if args['start']:

            speaker_leds.notification_start(zip(args['<red>'],
                                                args['<green>'],
                                                args['<blue>']))
        elif args['stop']:
            speaker_leds.notification_stop()
    elif args['initflow']:
        if args['start']:
            speaker_leds.initflow_pattern_start()
        elif args['stop']:
            speaker_leds.initflow_pattern_stop()
    elif args['off']:
        speaker_leds.all_off()


if __name__ == "__main__":
    args = docopt("""
    Usage:
      kano-speakerleds detect
      kano-speakerleds notification (start|stop) [<red> <green> <blue>] [<red> <green> <blue>]
      kano-speakerleds initflow (start|stop)
      kano-speakerleds off
      kano-speakerleds -h | --help

    Options:
      detect              Return 0 if the speaker LEDS are attached.
      notification start  Start a notification display
      notification start  Stop the notification display
      initflow on         Display the initflow pattern
      off                 clear leds
    """)

    parse_args(args)
